envs:
- key: PAGE_ACCESS_TOKEN
  scope: RUN_AND_BUILD_TIME
  type: SECRET
  value: EV[1:nsI6wJoaELW/ec/HfyA6ZM1a3io4kW81:krX10DCvIRd9118bCYGkxKXD1iRSaSwqxInJVlWsTPrctUgxZ4/3qv7EfCrWCjDBAlntGhQ3ok2fiFsJMQ0KkRePPqFWMwAoOiBeMKqMN+2OsEUOoDirR7qMAaaGRTwle5mRz+oEnLWY1LXtl2jzzR3NItRsNA/9X1vZxZfpNrn88DH1jHwH8f70qwg/8oq0ftKAZ7te7CdUF2aQdt7F3YesVrzzRvp5h/k7tb6d+Oi3/rjyPaPAoKX9NCa4rRnpNHNVvX1k/1AIsJdJSo1tqgOLUHlIVH1Int8arzW/]
- key: VERIFY_TOKEN
  scope: RUN_AND_BUILD_TIME
  type: SECRET
  value: EV[1:BFsLEytRO81V07eO8DskPYo3Fl43/+O+:JWrKC68m4HBlvsHM0d8uas2cRQ44qIkyySBHo0zV9f5tuNlHIVl2YQ==]
- key: GEMINI_API_KEY
  scope: RUN_AND_BUILD_TIME
  type: SECRET
  value: EV[1:G9UoASjHNo8ettB2j8GxyBUTGvEl1du9:EJo5EGGDuTY2lwvvWqedPoD0rUGaVnQUUH1ClHljtZ7JRRPnZ+E4Kdnbd6Tff2iQfXCw7M+SAQ==]
- key: APP_SECRET
  scope: RUN_AND_BUILD_TIME
  type: SECRET
  value: EV[1:IMRlPDrzr9lqd+XCR21yLqdq1PMudzdl:OPM5pZsDQBAxBia8YyBnmwywwRj0xiLpq2ZwBrYIlvjzS1dgn2pGCNUh91kSCEOl]
ingress:
  rules:
  - component:
      name: facebook-bot
    match:
      path:
        prefix: /webhook
  - component:
      name: facebook-bot
    match:
      path:
        prefix: /health
  - component:
      name: admin-api
    match:
      path:
        prefix: /api
  - component:
      name: admin-ui
    match:
      path:
        prefix: /admin
  - component:
      name: facebook-bot
    match:
      path:
        prefix: /
name: essen-messenger-bot
region: sgp
services:
- build_command: npm install
  environment_slug: node-js
  envs:
  - key: NODE_ENV
    scope: RUN_AND_BUILD_TIME
    value: production
  - key: DB_PATH
    scope: RUN_AND_BUILD_TIME
    value: /workspace/database/bot.db
  - key: PORT
    scope: RUN_AND_BUILD_TIME
    value: "3000"
  - key: PAGE_ACCESS_TOKEN
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:nsI6wJoaELW/ec/HfyA6ZM1a3io4kW81:krX10DCvIRd9118bCYGkxKXD1iRSaSwqxInJVlWsTPrctUgxZ4/3qv7EfCrWCjDBAlntGhQ3ok2fiFsJMQ0KkRePPqFWMwAoOiBeMKqMN+2OsEUOoDirR7qMAaaGRTwle5mRz+oEnLWY1LXtl2jzzR3NItRsNA/9X1vZxZfpNrn88DH1jHwH8f70qwg/8oq0ftKAZ7te7CdUF2aQdt7F3YesVrzzRvp5h/k7tb6d+Oi3/rjyPaPAoKX9NCa4rRnpNHNVvX1k/1AIsJdJSo1tqgOLUHlIVH1Int8arzW/]
  - key: VERIFY_TOKEN
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:BFsLEytRO81V07eO8DskPYo3Fl43/+O+:JWrKC68m4HBlvsHM0d8uas2cRQ44qIkyySBHo0zV9f5tuNlHIVl2YQ==]
  - key: GEMINI_API_KEY
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:G9UoASjHNo8ettB2j8GxyBUTGvEl1du9:EJo5EGGDuTY2lwvvWqedPoD0rUGaVnQUUH1ClHljtZ7JRRPnZ+E4Kdnbd6Tff2iQfXCw7M+SAQ==]
  - key: APP_SECRET
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:IMRlPDrzr9lqd+XCR21yLqdq1PMudzdl:OPM5pZsDQBAxBia8YyBnmwywwRj0xiLpq2ZwBrYIlvjzS1dgn2pGCNUh91kSCEOl]
  github:
    branch: main
    deploy_on_push: true
    repo: Singabyte/essen-facebook-messenger
  http_port: 3000
  instance_count: 1
  instance_size_slug: apps-s-1vcpu-0.5gb
  name: facebook-bot
  run_command: npm start
  source_dir: /
- build_command: npm install
  environment_slug: node-js
  envs:
  - key: NODE_ENV
    scope: RUN_AND_BUILD_TIME
    value: production
  - key: JWT_SECRET
    scope: RUN_AND_BUILD_TIME
    type: SECRET
    value: EV[1:GS7r815Cq1EiUDT0OXcP0li5GSDizGRA:cjJRm8o+/ePGYRE3BCsQFg==]
  - key: PORT
    scope: RUN_AND_BUILD_TIME
    value: "4000"
  - key: DB_PATH
    scope: RUN_AND_BUILD_TIME
    value: /workspace/database/bot.db
  - key: FRONTEND_URL
    scope: RUN_AND_BUILD_TIME
    value: ${APP_URL}
  github:
    branch: main
    deploy_on_push: true
    repo: Singabyte/essen-facebook-messenger
  http_port: 4000
  instance_count: 1
  instance_size_slug: apps-s-1vcpu-0.5gb
  name: admin-api
  run_command: npm start
  source_dir: /admin-interface/server
static_sites:
- build_command: npm install && npm run build
  environment_slug: node-js
  envs:
  - key: VITE_API_URL
    scope: BUILD_TIME
    value: ${APP_URL}/api
  github:
    branch: main
    deploy_on_push: true
    repo: Singabyte/essen-facebook-messenger
  name: admin-ui
  output_dir: dist
  source_dir: /admin-interface/client